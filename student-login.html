<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Calculator</title>
    <script>
    function preventback(){
      window.history.forward();
    }
    setTimeout("preventback()", 0);
    window.onunload=function(){ null };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </head>
  <body style="background-color: rgb(8, 252, 232);">
    <form action="" method="POST">
        <div class="form-control w-50 mx-auto mt-5 bg-info border-dark">
            <h5 class="text-center mt-1">Student Login</h5>
            <p class="col-md-5 text-center mx-auto rounded bg-danger text-white" id="error"></p>
            <div class="col-md-5 mx-auto mt-3">
                <label for="">Email</label>
                <input type="email" id="email" class="form-control" required>
            </div> 
            <div class="col-md-5 mx-auto mt-3">
                <label for="">Password</label>
                <input type="password" id="password" class="form-control" required>
            </div> 
            <div class="col-md-12 text-center mt-3 mb-3">
                <button class="btn btn-primary" type="button" onclick="submitForm()">Submit</button>
                <button class="btn btn-danger" type="reset">Cancel</button>
            </div> 
            <div class="col-md-12 text-center mt-3 mb-3">
                Create new account <a style="text-decoration: none;"  class="text-primary" href="student-signup">signup</a>
            </div>
        </div>
    </form>
</body>
<script>
    function submitForm(){
        var email=document.getElementById("email").value;
        var password=document.getElementById("password").value;
        var user_record=new Array();
        user_record=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")):[];
        if(user_record.some((v)=>{return v.email==email && v.password==password})){
            alert("login successfully!");
            var current_user=user_record.filter((v)=>{return v.email==email && v.password==password})[0];
            localStorage.setItem('username',current_user.username);
            localStorage.setItem('email',current_user.email);
            var username=localStorage.getItem("username");
            window.location.href="index?user="+username;
        }else{
            alert("Please enter correct email & password!");
            window.location.href="student-login";
        }
    }
</script>
</html>